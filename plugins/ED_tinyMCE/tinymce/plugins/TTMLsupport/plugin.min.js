tinymce.create("tinymce.Textcube.TTMLsupport",{init:function(e,t){var r=this;r.propertyFilePath=e.propertyFilePath,r.propertyNames=["propertyInsertObject","propertyImage1","propertyImage2","propertyImage3","propertyObject","propertyObject1","propertyObject2","propertyiMazing","propertyGallery","propertyJukebox","propertyEmbed","propertyFlash","propertyMoreLess"],r.styleUnknown="style=\"width: 90px; height: 30px; border: 2px outset #796; background-color: #efd; background-repeat: no-repeat; background-position: center center; background-image: url('"+servicePath+"/resources/image/extension/unknown.gif')\"",r.editorMode="wysiwyg",e.on("LoadContent",function(e){e.content=r.TTMLtoHTML(e.content)}),e.on("BeforeSetContent",function(e){e.set&&(e.content=r.TTMLtoHTML(e.content)),e.get&&(e.content=r.HTMLtoTTML(e.content))}),e.on("PostProcess",function(e){e.set&&(e.content=r.TTMLtoHTML(e.content)),e.get&&(e.content=r.HTMLtoTTML(e.content))});var a=null,i=null,l=jQuery("#upload-section"),p=!0;e.on("NodeChange",function(e){return e.element==a?!1:(clearTimeout(i),a=e.element,i=setTimeout(r.showProperty(e.element),500),0==p&&(l.slideUp(600),p=!0),void 0)}),e.addCommand("textcubeToggleUploadDlg",function(){l.is(":hidden")?(l.slideDown(600),setTimeout(function(){p=!1},3e3)):(l.slideUp(600),p=!0)}),e.addCommand("textcubeSavePost",function(){return entryManager.saveEntry(),!1}),e.addCommand("textcubeMoreLessBlock",function(){return r.command("MoreLessBlock"),!1}),e.addCommand("textcubeToggleSourceCodeEditor",function(){return r.command("ToggleTextarea"),!1}),e.addButton("tcattach",{title:"Upload and insert files",cmd:"textcubeToggleUploadDlg",icon:"browse"}),e.addButton("tcsave",{title:"Save current post",cmd:"textcubeSavePost",icon:"save"}),e.addButton("tcmoreless",{title:"Add more/less block",cmd:"textcubeMoreLessBlock",icon:"pagebreak"});var s=document.createElement("div");s.id="tinyMCEeditor-textbox",s.className="container",document.getElementById("editWindow").parentNode.insertBefore(s,document.getElementById("editWindow")),s.appendChild(r.getEditorProperty())},TTMLtoHTML:function(e){for(var t=this;;){var r=e.indexOf("[#M_");if(!(r>-1))break;var a=e.indexOf("_M#]",r);if(!(a>-1))break;for(var l=e.substring(r+4,a);;){if(-1==l.indexOf("[#M_"))break;l=l.substring(l.indexOf("[#M_")+4,l.length)}var p=t._htmlspecialchars(l.substring(0,l.indexOf("|"))),s=l.substring(l.indexOf("|")+1,l.length),o=t._htmlspecialchars(s.substring(0,s.indexOf("|")));s=s.substring(s.indexOf("|"),s.length);var n=s.substring(s.indexOf("|")+1,s.length);p=p.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),p=p.replaceAll("&lt;","&amp;lt;"),p=p.replaceAll("&gt;","&amp;gt;"),o=o.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),o=o.replaceAll("&lt;","&amp;lt;"),o=o.replaceAll("&gt;","&amp;gt;"),e=e.replaceAll("[#M_"+l+"_M#]",'<div class="tattermoreless" more="'+p+'" less="'+o+'">'+n+"</div>")}for(var _=new RegExp("\\[##_(([1-3][CLR])(\\|[^|]*?)+)_##\\]","");result=_.exec(e);){var d=result[0],c=' longdesc="'+t.addQuot(t._htmlspecialchars(result[1]))+'" ';c=c.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),c=c.replaceAll("&lt;","&amp;lt;"),c=c.replaceAll("&gt;","&amp;gt;");var y=result[1].split("|"),u=y[0];if(t._isImageFile(y[1]))var g=t.propertyFilePath+y[1],m=t.parseImageSize(y[2],"string");else var g=servicePath+adminSkin+"/image/spacer.gif",m=t.styleUnknown;switch(u){case"1L":var b='<img class="tatterImageLeft" src="'+g+'" '+m+c+" />";break;case"1R":var b='<img class="tatterImageRight" src="'+g+'" '+m+c+" />";break;case"1C":var b='<img class="tatterImageCenter" src="'+g+'" '+m+c+" />";break;case"2C":var b='<img class="tatterImageDual" src="'+servicePath+adminSkin+'/image/spacer.gif" width="200" height="100" '+c+" />";break;case"3C":var b='<img class="tatterImageTriple" src="'+servicePath+adminSkin+'/image/spacer.gif" width="300" height="100" '+c+" />"}e=e.replaceAll(d,b)}for(var v=new RegExp("\\[##_iMazing\\|(.*?)_##\\]","");result=v.exec(e);){var d=result[0],c=' longdesc="iMazing|'+t.addQuot(t._htmlspecialchars(result[1]))+'" ';c=c.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),c=c.replaceAll("&lt;","&amp;lt;"),c=c.replaceAll("&gt;","&amp;gt;");var m=t.parseImageSize(result[1],"string"),b='<img class="tatterImazing" src="'+servicePath+adminSkin+'/image/spacer.gif" '+m+c+" />";e=e.replaceAll(d,b)}for(var h=new RegExp("\\[##_Gallery\\|(.*?)_##\\]","");result=h.exec(e);){var d=result[0],c=' longdesc="Gallery|'+t.addQuot(t._htmlspecialchars(result[1]))+'" ';c=c.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),c=c.replaceAll("&lt;","&amp;lt;"),c=c.replaceAll("&gt;","&amp;gt;");var m=t.parseImageSize(result[1],"string"),b='<img class="tatterGallery" src="'+servicePath+adminSkin+'/image/spacer.gif" '+m+c+" />";e=e.replaceAll(d,b)}for(var I=new RegExp("\\[##_Jukebox\\|(.*?)_##\\]","");result=I.exec(e);){var d=result[0],c=' longdesc="Jukebox|'+t.addQuot(t._htmlspecialchars(result[1]))+'" ';c=c.replaceAll("&lt;span id=&quot;CmCaReT&quot;&gt;&lt;/span&gt;",""),c=c.replaceAll("&lt;","&amp;lt;"),c=c.replaceAll("&gt;","&amp;gt;");var b='<img class="tatterJukebox" src="'+servicePath+adminSkin+'/image/spacer.gif" width="200" height="25"'+c+" />";e=e.replaceAll(d,b)}for(var _=new RegExp("src=[\"']?(\\[##_ATTACH_PATH_##\\][a-z.0-9/]*)","i");result=_.exec(e);)e=e.replaceAll(result[0],'class="tatterImageFree" longdesc="'+result[1]+'" src="'+t.propertyFilePath.substring(0,t.propertyFilePath.length-1)+result[1].replaceAll("[##_ATTACH_PATH_##]",""));var x=getTagChunks(e,"object");if(x.length>0)for(i in x)e=e.replaceAll(x[i],'<img class="tatterObject" src="'+servicePath+adminSkin+'/image/spacer.gif"'+t.parseImageSize(x[i],"string","css")+' longDesc="'+t.objectSerialize(x[i])+'" />');for(var f=new RegExp("<embed([^<]*?)application/x-shockwave-flash(.*?)></embed>","i");result=f.exec(e);){var n=result[0];e=e.replaceAll(n,'<img class="tatterFlash" src="'+servicePath+adminSkin+'/image/spacer.gif"'+t.parseImageSize(n,"string","css")+' longDesc="'+t.parseAttribute(n,"src")+'"/>')}for(var f=new RegExp("<embed([^<]*?)></embed>","i");result=f.exec(e);){var n=result[0];e=e.replaceAll(n,'<img class="tatterEmbed" src="'+servicePath+adminSkin+'/image/spacer.gif"'+t.parseImageSize(n,"string","css")+' longDesc="'+t.parseAttribute(n,"src")+'"/>')}return e},HTMLtoTTML:function(e){var t=this;e=t.morelessConvert(e);for(var r=new RegExp("<img[^>]*?class=[\"']?tatterImage[^>]*?>","i");result=r.exec(e);){var a=result[0],i=t.parseAttribute(result[0],"longdesc");if(i&&-1==i.indexOf("[##_ATTACH_PATH_##]"))e=e.replaceAll(a,"[##_"+t.removeQuot(i).replace(new RegExp("&amp;","gi"),"&")+"_##]");else{var l=t.parseAttribute(a,"align").toLowerCase();e="left"==l||"right"==l||"center"==l?e.replaceAll(a,'<img src="'+i+'"'+t.parseImageSize(a,"string")+'align="'+l+'"/>'):e.replaceAll(a,'<img src="'+i+'"'+t.parseImageSize(a,"string")+"/>")}}for(var p=new RegExp("<img[^>]*class=[\"']?tatterImazing[^>]*>","i");result=p.exec(e);){var a=result[0],s=t.parseImageSize(a,"array"),o=t.parseAttribute(result[0],"longdesc");o=t.removeQuot(o),o=o.replace(new RegExp("(width=[\"']?)\\d*","i"),"$1"+s[0]),o=o.replace(new RegExp("(height=[\"']?)\\d*","i"),"$1"+s[1]),e=e.replaceAll(a,"[##_"+o.replace(new RegExp("&amp;","gi"),"&")+"_##]")}for(var n=new RegExp("<img[^>]*class=[\"']?tatterGallery[^>]*>","i");result=n.exec(e);){var a=result[0],s=t.parseImageSize(a,"array"),o=t.parseAttribute(result[0],"longdesc");o=t.removeQuot(o),o=o.replace(new RegExp("(width=[\"']?)\\d*","i"),"$1"+s[0]),o=o.replace(new RegExp("(height=[\"']?)\\d*","i"),"$1"+s[1]),o=o.split("|"),o.length%2==1&&o.length--;for(var _="",d=1;d<o.length-1;d++)_+=o[d].replace(new RegExp("&amp;","gi"),"&")+"|";e=e.replaceAll(a,"[##_Gallery|"+_+t.un_htmlspecialchars(trim(o[o.length-1]))+"_##]")}for(var c=new RegExp("<img[^>]*class=[\"']?tatterJukebox[^>]*>","i");result=c.exec(e);){var a=result[0],s=t.parseImageSize(a,"array"),o=t.parseAttribute(result[0],"longdesc");o=t.removeQuot(o),o=o.replace(new RegExp("(width=[\"']?)\\d*","i"),"$1"+s[0]),o=o.replace(new RegExp("(height=[\"']?)\\d*","i"),"$1"+s[1]),o=o.split("|");for(var _="",d=1;d<o.length-2;d++)_+=o[d].replace(new RegExp("&amp;","gi"),"&")+"|";e=e.replaceAll(a,"[##_Jukebox|"+_+t.un_htmlspecialchars(trim(o[o.length-2]))+"|_##]")}return e},morelessConvert:function(e){for(var t=this;new RegExp("<div[^>]*?class=['\"]?tattermoreless[^>]*>","i").test(e);)e=t.morelessConvert_process(e);return e},morelessConvert_process:function(e){var t=this,r="",a=pos2=0,i=new RegExp("<div[^>]*?class=['\"]?tattermoreless[^>]*>","i"),l=void 0;if((a=e.indexOfCaseInsensitive(i,pos2))>-1){r+=e.substring(0,a);do{if(-1==(pos2=e.indexOfCaseInsensitive(new RegExp("</div>","i"),Math.max(a,pos2))))return r+e.substring(a,e.length).replace(i,"");pos2+=6,l=e.substring(a,pos2)}while(""!=l&&l.count(new RegExp("<div[>\\s]","gi"))!=l.count(new RegExp("</div>","gi")));var p=t.parseAttribute(l,"less").replaceAll("&amp;","&"),s=t.parseAttribute(l,"more").replaceAll("&amp;","&");l=l.replace(i,"[#M_"+s+"|"+p+"|"),l=l.replace(new RegExp("</div>$","i"),"_M#]"),r+=l}return r+e.substring(pos2,e.length)},parseAttribute:function(e,t){var r=new RegExp("(^|\\W)"+t+'="([^"]*)"',"gi"),a=new RegExp("(^|\\W)"+t+"='([^']*)'","gi"),i=new RegExp("(^|\\W)"+t+"=([^\\s>]*)","gi");return(result=r.exec(e))?result[2]:(result=a.exec(e))?result[2]:(result=i.exec(e))?result[2]:""},parseImageSize:function(e,t,r){var a=0,i=0;if("object"==typeof e)e.style.width&&e.style.height?(a=parseInt(e.style.width),i=parseInt(e.style.height)):(a=e.width,i=e.height);else{e=e.replace(new RegExp('longdesc=".*?"',"gi"),""),e=e.replace(new RegExp("longdesc='.*?'","gi"),"");var l,p,s=new RegExp("width:\\s*(\\d+)","gi"),o=new RegExp("height:\\s*(\\d+)","gi"),n=new RegExp("width=[\"']?(\\d+)","gi"),_=new RegExp("height=[\"']?(\\d+)","gi");(l=s.exec(e))?a=l[1]:(l=n.exec(e))&&(a=l[1]),(p=o.exec(e))?i=p[1]:(p=_.exec(e))&&(i=p[1])}if("array"==t)return new Array(a,i);if("css"==r){var d=' style="';return a>0&&(d+="width: "+a+"px;"),i>0&&(d+="height: "+i+"px;"),d+'"'}var d=" ";return a>0&&(d+='width="'+a+'" '),i>0&&(d+='height="'+i+'" '),d},_htmlspecialchars:function(e){var t=this;return t.addQuot(e.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;"))},un_htmlspecialchars:function(e){var t=this;return t.removeQuot(e.replace(new RegExp("&amp;","gi"),"&").replace(new RegExp("&lt;","gi"),"<").replace(new RegExp("&gt;","gi"),">"))},addQuot:function(e){return e.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;")},removeQuot:function(e){return e.replace(new RegExp("&quot;","gi"),'"').replace(new RegExp("&#39;","g"),"'")},_isImageFile:function(e){return new RegExp("\\.(jpe?g|gif|png|bmp)$","gi").exec(e)},_isMediaFile:function(e){return new RegExp("\\.(swf|mid|mp3|wav|wax|wma|avi|asf|asx|mov|mpe?g|wmv|wm|wvx)$","gi").exec(e)},getFilenameFromFilelist:function(e){for(var t=getObject("TCfilelist"),r=0;r<t.length;r++)if(0==t.options[r].value.indexOf(e))return t.options[r].text.substring(0,t.options[r].text.lastIndexOf("(")-1);return e},showProperty:function(e){var t=this;if(t.selectedAnchorElement=null,t.selectedNode=e,"undefined"!=typeof e.getAttribute)var r=e.getAttribute("longdesc");if(t.id="tinyMCE",getObject(t.id+"propertyImage1").style.display="none",getObject(t.id+"propertyImage2").style.display="none",getObject(t.id+"propertyImage3").style.display="none",getObject(t.id+"propertyObject").style.display="none",getObject(t.id+"propertyObject1").style.display="none",getObject(t.id+"propertyObject2").style.display="none",getObject(t.id+"propertyObject3").style.display="none",getObject(t.id+"propertyiMazing").style.display="none",getObject(t.id+"propertyiMazing_preview").style.display="none",getObject(t.id+"propertyGallery").style.display="none",getObject(t.id+"propertyGallery_preview").style.display="none",getObject(t.id+"propertyJukebox").style.display="none",getObject(t.id+"propertyEmbed").style.display="none",getObject(t.id+"propertyMoreLess").style.display="none","tatterObject"==e.className){t.propertyHeader="tatterObject",t.propertyWindowId=t.id+"propertyObject";var a=t.parseImageSize(e,"array");getObject(t.id+"propertyObject_width").value=a[0],getObject(t.id+"propertyObject_height").value=a[1],getObject(t.id+"propertyObject_chunk").value=t.objectUnSerialize(r),getObject(t.id+"propertyInsertObject").style.display="none",getObject(t.id+"propertyObject").style.display="block"}else if("tatterEmbed"==e.className){t.propertyHeader="tatterEmbed",t.propertyWindowId=t.id+"propertyEmbed";var a=t.parseImageSize(e,"array");getObject(t.id+"propertyEmbed_width").value=a[0],getObject(t.id+"propertyEmbed_height").value=a[1],getObject(t.id+"propertyEmbed_src").value=r,getObject(t.id+"propertyEmbed").style.display="block"}else{if(!e.tagName||"img"!=e.tagName.toLowerCase()||!r){for(var i=e;i.parentNode;){if(i.tagName&&"div"==i.tagName.toLowerCase()&&null!=i.getAttribute("more")&&null!=i.getAttribute("less")){var l=i.getAttribute("more"),p=i.getAttribute("less");return getObject(t.id+"propertyInsertObject").style.display="none",getObject(t.id+"propertyMoreLess").style.display="block",getObject(t.id+"propertyMoreLess_more").value=trim(t.un_htmlspecialchars(l)),getObject(t.id+"propertyMoreLess_less").value=trim(t.un_htmlspecialchars(p)),t.propertyWindowId=t.id+"propertyMoreLess",t.setPropertyPosition(),!1}i=i.parentNode}return!1}var s=r.split("|");if(1==s.length)return!1;if(t.propertyHeader=s[0],"iMazing"==s[0]||"Gallery"==s[0]||"Jukebox"==s[0])var o=1,n=s[0],_=t.id+"property"+n;else var o=s[0].charAt(0),n=t._isImageFile(s[1])?"Image":"Object",_=t.id+"property"+n+o;if(t.propertyWindowId=_,"Image"==n){if(getObject(_+"_width1").value=trim(t.removeQuot(t.parseAttribute(s[2],"width"))),getObject(_+"_alt1").value=trim(t.un_htmlspecialchars(t.removeQuot(t.parseAttribute(s[2],"alt")))),getObject(_+"_caption1").value=trim(t.un_htmlspecialchars(t.removeQuot(s[3]))),t.propertyFilename1=s[1],1==o){var a=t.parseImageSize(e,"array");if(t.propertyCurrentImage==e.getAttribute("src")){var d=a[0],c=parseInt(a[0]*t.propertyCurrentProportion1);t.propertyCurrentProportion1=c/d,e.removeAttribute("width"),e.removeAttribute("height"),isNaN(d)||(e.style.width=d+"px"),isNaN(c)||(e.style.height=c+"px")}else t.propertyCurrentProportion1=a[1]/a[0],t.propertyCurrentImage=e.getAttribute("src")}else{var a=t.parseImageSize(s[2],"array");if(t.propertyCurrentProportion1=a[1]/a[0],o>1){var a=t.parseImageSize(s[5],"array");t.propertyCurrentProportion2=a[1]/a[0]}if(o>2){var a=t.parseImageSize(s[8],"array");t.propertyCurrentProportion3=a[1]/a[0]}}o>1&&(getObject(_+"_width2").value=trim(t.removeQuot(t.parseAttribute(s[5],"width"))),getObject(_+"_alt2").value=trim(t.un_htmlspecialchars(t.removeQuot(t.parseAttribute(s[5],"alt")))),getObject(_+"_caption2").value=trim(t.un_htmlspecialchars(t.removeQuot(s[6])))),t.propertyFilename2=s[4],o>2&&(getObject(_+"_width3").value=trim(t.removeQuot(t.parseAttribute(s[8],"width"))),getObject(_+"_alt3").value=trim(t.un_htmlspecialchars(t.removeQuot(t.parseAttribute(s[8],"alt")))),getObject(_+"_caption3").value=trim(t.un_htmlspecialchars(t.removeQuot(s[9])))),t.propertyFilename3=s[7]}else if("Object"==n)getObject(_+"_caption1").value=trim(t.un_htmlspecialchars(t.removeQuot(s[3]))),getObject(_+"_filename1").value=t.getFilenameFromFilelist(s[1]),t.propertyFilename1=s[1],o>1&&(getObject(_+"_caption2").value=trim(t.un_htmlspecialchars(t.removeQuot(s[6]))),getObject(_+"_filename2").value=t.getFilenameFromFilelist(s[4]),t.propertyFilename2=s[4]),o>2&&(getObject(_+"_caption3").value=trim(t.un_htmlspecialchars(t.removeQuot(s[9]))),getObject(_+"_filename3").value=t.getFilenameFromFilelist(s[7]),t.propertyFilename3=s[7]);else if("iMazing"==n){var a=t.parseImageSize(e,"array"),y=s[s.length-2];getObject(_+"_width").value=a[0],getObject(_+"_height").value=a[1],getObject(_+"_frame").value=t.parseAttribute(y,"frame"),getObject(_+"_tran").value=t.parseAttribute(y,"transition"),getObject(_+"_nav").value=t.parseAttribute(y,"navigation"),getObject(_+"_sshow").value=t.parseAttribute(y,"slideshowInterval"),getObject(_+"_page").value=t.parseAttribute(y,"page"),getObject(_+"_align").value=t.parseAttribute(y,"align"),getObject(_+"_caption").value=trim(t.un_htmlspecialchars(t.removeQuot(s[s.length-1])));var u=getObject(_+"_list");u.innerHTML="";for(var g=1;g<s.length-2;g+=2)u.options[u.length]=new Option(t.getFilenameFromFilelist(s[g]),s[g]+"|",!1,!1)}else if("Gallery"==n){var a=t.parseImageSize(e,"array"),y=s[s.length-2];getObject(_+"_width").value=a[0],getObject(_+"_height").value=a[1],getObject(_+"_caption").value="";var u=getObject(_+"_list");u.innerHTML="";for(var g=1;g<s.length-2;g+=2)u.options[u.length]=new Option(t.getFilenameFromFilelist(s[g]),s[g]+"|"+t.un_htmlspecialchars(s[g+1]),!1,!1),1==g&&(u.selectedIndex=0,t.listChanged("propertyGallery_list"))}else if("Jukebox"==n){getObject(_+"_autoplay").checked=1==t.parseAttribute(s[s.length-2],"autoplay"),getObject(_+"_visibility").checked=1==t.parseAttribute(s[s.length-2],"visible");var u=getObject(_+"_list");u.innerHTML="";for(var g=1;g<s.length-2;g+=2)u.options[u.length]=new Option(t.getFilenameFromFilelist(s[g]),s[g]+"|"+t.un_htmlspecialchars(s[g+1]),!1,!1)}getObject(_).style.display="block"}return!0},setProperty:function(){var e=this,t=e.selectedNode,r=t.getAttribute("longdesc");if("tatterObject"==t.className||"tatterEmbed"==t.className||"tatterFlash"==t.className){t.removeAttribute("width"),t.removeAttribute("height"),t.style.width="auto",t.style.height="auto";try{var a=parseInt(getObject(e.propertyWindowId+"_width").value);!isNaN(a)&&a>0&&1e4>a&&(t.style.width=a+"px");var i=parseInt(getObject(e.propertyWindowId+"_height").value);!isNaN(i)&&i>0&&1e4>i&&(t.style.height=i+"px")}catch(l){}"tatterEmbed"==t.className||"tatterFlash"==t.className?t.setAttribute("longDesc",getObject(e.propertyWindowId+"_src").value):t.setAttribute("longDesc",e.objectSerialize(getObject(e.propertyWindowId+"_chunk").value))}else if(t.tagName&&"img"==t.tagName.toLowerCase()&&r){if(0==e.propertyWindowId.indexOf(e.id+"propertyImage")){var p=e.propertyWindowId.charAt(e.propertyWindowId.length-1);if(1==p){t.removeAttribute("width"),t.removeAttribute("height"),t.style.width="auto",t.style.height="auto";try{var s=parseInt(getObject(e.propertyWindowId+"_width1").value);if(!isNaN(s)&&s>0&&1e4>s){var o=s,n=parseInt(s*e.propertyCurrentProportion1);t.style.width=o+"px",t.style.height=n+"px"}}catch(l){}}var _="",d="",c="";try{var s=parseInt(getObject(e.propertyWindowId+"_width1").value);!isNaN(s)&&s>0&&1e4>s&&(_='width="'+s+'" height="'+parseInt(s*e.propertyCurrentProportion1)+'" ')}catch(l){}try{e._isImageFile(e.propertyFilename1)&&(d='alt="'+e._htmlspecialchars(getObject(e.propertyWindowId+"_alt1").value)+'"')}catch(l){d='alt=""'}try{c=e._htmlspecialchars(getObject(e.propertyWindowId+"_caption1").value)}catch(l){c=""}var y=e.propertyHeader+"|"+e.propertyFilename1+"|"+_+d+"|"+c;if(p>1){_="",d="",c="";try{var s=parseInt(getObject(e.propertyWindowId+"_width2").value);!isNaN(s)&&s>0&&1e4>s&&(_='width="'+s+'" height="'+parseInt(s*e.propertyCurrentProportion2)+'" ')}catch(l){}try{e._isImageFile(e.propertyFilename2)&&(d='alt="'+e._htmlspecialchars(getObject(e.propertyWindowId+"_alt2").value)+'"')}catch(l){d='alt = ""'}try{c=e._htmlspecialchars(getObject(e.propertyWindowId+"_caption2").value)}catch(l){c=""}y+="|"+e.propertyFilename2+"|"+_+d+"|"+c}if(p>2){_="",d="",c="";try{var s=parseInt(getObject(e.propertyWindowId+"_width3").value);!isNaN(s)&&s>0&&1e4>s&&(_='width="'+s+'" height="'+parseInt(s*e.propertyCurrentProportion3)+'" ')}catch(l){}try{e._isImageFile(e.propertyFilename3)&&(d='alt="'+e._htmlspecialchars(getObject(e.propertyWindowId+"_alt3").value)+'"')}catch(l){d='alt = ""'}try{c=e._htmlspecialchars(getObject(e.propertyWindowId+"_caption3").value)}catch(l){c=""}y+="|"+e.propertyFilename3+"|"+_+d+"|"+c}t.setAttribute("longDesc",y)}else if(0==e.propertyWindowId.indexOf(e.id+"propertyObject")){var p=e.propertyWindowId.charAt(e.propertyWindowId.length-1),y=e.propertyHeader+"|"+e.propertyFilename1+"||"+e._htmlspecialchars(getObject(e.propertyWindowId+"_caption1").value);p>1&&(y+="|"+e.propertyFilename2+"||"+e._htmlspecialchars(getObject(e.propertyWindowId+"_caption2").value)),p>2&&(y+="|"+e.propertyFilename3+"||"+e._htmlspecialchars(getObject(e.propertyWindowId+"_caption3").value)),t.setAttribute("longDesc",y)}else if(0==e.propertyWindowId.indexOf(e.id+"propertyiMazing")){for(var u=getObject(e.id+"propertyiMazing_list"),y="iMazing|",g=0;g<u.length;g++)y+=u[g].value.substring(0,u[g].value.indexOf("|"))+"||";t.removeAttribute("width"),t.removeAttribute("height"),t.style.width="auto",t.style.height="auto";var m="",a=parseInt(getObject(e.id+"propertyiMazing_width").value);!isNaN(a)&&a>0&&1e4>a&&(t.style.width=a+"px",m='width="'+a+'" ');var i=parseInt(getObject(e.id+"propertyiMazing_height").value);!isNaN(i)&&i>0&&1e4>i&&(t.style.height=i+"px",m+='height="'+i+'"'),isNaN(a)&&isNaN(i)&&(t.style.width=t.style.height="100px",m='width="100" height="100"'),y+=m,y+=' frame="'+getObject(e.id+"propertyiMazing_frame").value+'"',y+=' transition="'+getObject(e.id+"propertyiMazing_tran").value+'"',y+=' navigation="'+getObject(e.id+"propertyiMazing_nav").value+'"',y+=' slideshowInterval="'+getObject(e.id+"propertyiMazing_sshow").value+'"',y+=' page="'+getObject(e.id+"propertyiMazing_page").value+'"',y+=' align="'+getObject(e.id+"propertyiMazing_align").value+'"',y+=' skinPath="'+servicePath+'/script/gallery/iMazing/"',y+="|"+e._htmlspecialchars(getObject(e.id+"propertyiMazing_caption").value),t.setAttribute("longDesc",y)}else if(0==e.propertyWindowId.indexOf(e.id+"propertyGallery")){var u=getObject(e.id+"propertyGallery_list"),y="Gallery|";if(-1!=u.selectedIndex){var b=getObject(e.id+"propertyGallery_caption").value.replaceAll("|",""),v=u[u.selectedIndex].value.split("|");u[u.selectedIndex].value=v[0]+"|"+b}for(var g=0;g<u.length;g++)y+=e._htmlspecialchars(u[g].value)+"|";t.removeAttribute("width"),t.removeAttribute("height"),t.style.width="auto",t.style.height="auto";var m="",a=parseInt(getObject(e.id+"propertyGallery_width").value);!isNaN(a)&&a>0&&1e4>a&&(t.style.width=a+"px",m='width="'+a+'" ');var i=parseInt(getObject(e.id+"propertyGallery_height").value);!isNaN(i)&&i>0&&1e4>i&&(t.style.height=i+"px",m+='height="'+i+'"'),isNaN(a)&&isNaN(i)&&(t.style.width=t.style.height="100px",m="width=100 height=100"),y+=trim(m)+"|",t.setAttribute("longDesc",y)}else if(0==e.propertyWindowId.indexOf(e.id+"propertyJukebox")){var u=getObject(e.id+"propertyJukebox_list"),y="Jukebox|";if(-1!=u.selectedIndex){var h=getObject(e.id+"propertyJukebox_title").value.replaceAll("|",""),v=u[u.selectedIndex].value.split("|");u[u.selectedIndex].value=v[0]+"|"+h}for(var g=0;g<u.length;g++)y+=u[g].value+"|";y+="autoplay="+(getObject(e.id+"propertyJukebox_autoplay").checked?1:0),y+=" visible="+(getObject(e.id+"propertyJukebox_visibility").checked?1:0),t.setAttribute("longDesc",y+"|")}}else t.tagName&&"div"==t.tagName.toLowerCase()&&null!=t.getAttribute("more")&&null!=t.getAttribute("less")&&(t.setAttribute("more",e._htmlspecialchars(getObject(e.id+"propertyMoreLess_more").value)),t.setAttribute("less",e._htmlspecialchars(getObject(e.id+"propertyMoreLess_less").value)))},getEditorProperty:function(){var e=editor.fixPosition;html='<div id="__ID__propertyInsertObject" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyInsertObject-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyInsertObject-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("오브젝트 삽입")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyInsertObject_type">'+_t("유형")+"</label></dt><dd><select id=\"__ID__propertyInsertObject_type\" style=\"width: 105px\" onchange=\"getObject('__ID__propertyInsertObject_part_url').style.display=getObject('__ID__propertyInsertObject_part_raw').style.display='none';getObject('__ID__propertyInsertObject_part_' + t.value).style.display = 'block'\"><option value=\"url\">"+_t("주소입력")+'</option><option value="raw">'+_t("코드 붙여넣기")+'</option></select></dd></dl><dl id="__ID__propertyInsertObject_part_url" class="line"><dt class="property-name"><label for="__ID__propertyInsertObject_url">'+_t("파일 주소")+'</label></dt><dd><input type="text" id="__ID__propertyInsertObject_url" class="input-text" onkeypress="return preventEnter(event);" /></dd></dl><dl id="__ID__propertyInsertObject_part_raw" class="line" style="display: none"><dt class="property-name"><label for="__ID__propertyInsertObject_chunk">'+_t("코드")+'</label></dt><dd><textarea id="__ID__propertyInsertObject_chunk" cols="30" rows="10"></textarea></dd></dl></div><div class="button-box"><span class="insert-button button" onclick="__EDITOR__.command(\'InsertObject\'); return false"><span class="text">'+_t("삽입하기")+'</span></span><span class="divider"> | </span><span class="cancel-button button" onclick="__EDITOR__.command(\'HideObjectBlock\'); return false"><span class="text">'+_t("취소하기")+"</span></span></div></div>",html+='<div id="__ID__propertyImage1" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyImage1-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyImage1-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Image")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyImage1_width1">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage1_width1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage1_alt1">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage1_alt1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage1_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage1_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div></div>',html+='<div id="__ID__propertyImage2" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyImage2-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyImage2-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Image")+'</h4><div class="group"><div class="title">'+_t("첫번째 이미지")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_width1">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage2_width1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_alt1">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage2_alt1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage2_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div><div class="group"><div class="title">'+_t("두번째 이미지")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_width2">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage2_width2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_alt2">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage2_alt2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage2_caption2">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage2_caption2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div></div>',html+='<div id="__ID__propertyImage3" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyImage3-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyImage3-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Image")+'</h4><div class="group"><div class="title">'+_t("첫번째 이미지")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_width1">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_width1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_alt1">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_alt1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage3_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div><div class="group"><div class="title">'+_t("두번째 이미지")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_width2">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_width2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_alt2">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_alt2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_caption2">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage3_caption2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div><div class="group"><div class="title">'+_t("세번째 이미지")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_width3">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_width3" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_alt3">'+_t("대체 텍스트")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyImage3_alt3" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyImage3_caption3">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyImage3_caption3" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div></div>',html+='<div id="__ID__propertyObject" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyObject-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyObject-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Object")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyObject_width">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject_width" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject_height">'+_t("높이")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject_height" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject_chunk">'+_t("코드")+'</label></dt><dd><textarea id="__ID__propertyObject_chunk" class="propertyObject_chunk" cols="30" rows="10" onkeyup="__EDITOR__.setProperty()"></textarea></dd></dl></div></div>',
html+='<div id="__ID__propertyObject1" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyObject1-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyObject1-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Object 1")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyObject1_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject1_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject1_filename1">'+_t("파일명(수정불가)")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject1_filename1" readonly="readonly" /></dd></dl></div></div>',html+='<div id="__ID__propertyObject2" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyObject2-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyObject2-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Object")+'</h4><div class="group"><div class="title">'+_t("첫번째 오브젝트")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyObject2_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject2_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject2_filename1">'+_t("파일명")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject2_filename1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div><div class="group"><div class="title">'+_t("두번째 오브젝트")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyObject2_caption2">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject2_caption2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject2_filename2">'+_t("파일명")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject2_filename2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div></div>',html+='<div id="__ID__propertyObject3" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyObject3-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyObject3-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Object")+'</h4><div class="group"><div class="title">'+_t("첫번째 오브젝트")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_caption1">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject3_caption1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_filename1">'+_t("파일명")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject3_filename1" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div><div class="group"><div class="title">'+_t("두번째 오브젝트")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_caption2">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject3_caption2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_filename2">'+_t("파일명")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject3_filename2" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div><div class="group"><div class="title">'+_t("세번째 오브젝트")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_caption3">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyObject3_caption3" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyObject3_filename3">'+_t("파일명")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyObject3_filename3" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div></div>',html+='<div id="__ID__propertyiMazing" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyiMazing-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyiMazing-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("iMazing")+'</h4><div class="group"><div class="title">'+_t("설정")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_width">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyiMazing_width" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_height">'+_t("높이")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyiMazing_height" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_frame">'+_t("테두리")+'</label></dt><dd><select id="__ID__propertyiMazing_frame" onchange="__EDITOR__.setProperty()"><option value="net_imazing_frame_none">'+_t("테두리 없음")+'</option></select></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_tran">'+_t("장면전환효과")+'</label></dt><dd><select id="__ID__propertyiMazing_tran" onchange="__EDITOR__.setProperty()"><option value="net_imazing_show_window_transition_none">'+_t("효과없음")+'</option><option value="net_imazing_show_window_transition_alpha">'+_t("투명전환")+'</option><option value="net_imazing_show_window_transition_contrast">'+_t("플래쉬")+'</option><option value="net_imazing_show_window_transition_sliding">'+_t("슬라이딩")+'</option></select></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_nav">'+_t("내비게이션")+'</label></dt><dd><select id="__ID__propertyiMazing_nav" onchange="__EDITOR__.setProperty()"><option value="net_imazing_show_window_navigation_none">'+_t("기본")+'</option><option value="net_imazing_show_window_navigation_simple">'+_t("심플")+'</option><option value="net_imazing_show_window_navigation_sidebar">'+_t("사이드바")+'</option></select></dd></dl><dl class="line"><dt class="property-name">'+_t("슬라이드쇼 간격")+'</dt><dd><input type="text" class="input-text" id="__ID__propertyiMazing_sshow" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name">'+_t("화면당 이미지 수")+'</dt><dd><input type="text" class="input-text" id="__ID__propertyiMazing_page" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_align">'+_t("정렬방법")+'</label></dt><dd><select id="__ID__propertyiMazing_align" onchange="__EDITOR__.setProperty()"><option value="h">'+_t("가로")+'</option><option value="v">'+_t("세로")+'</option></select></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyiMazing_caption">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyiMazing_caption" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div><div class="group"><div class="title">'+_t("파일")+'</div><dl class="file-list-line line"><dd><select id="__ID__propertyiMazing_list" class="file-list" size="10" onchange="__EDITOR__.listChanged(\'propertyiMazing_list\')" onclick="__EDITOR__.listChanged(\'propertyiMazing_list\')"></select></dd></dl><div class="button-box"><span class="up-button button" onclick="__EDITOR__.moveUpFileList(\'__ID__propertyiMazing_list\'); return false" title="'+_t("선택한 항목을 위로 이동합니다.")+'"><span class="text">'+_t("위로")+'</span></span><span class="divider"> | </span><span class="dn-button button" onclick="__EDITOR__.moveDownFileList(\'__ID__propertyiMazing_list\'); return false" title="'+_t("선택한 항목을 아래로 이동합니다.")+'"><span class="text">'+_t("아래로")+'</span></span></div><div id="__ID__propertyiMazing_preview" class="preview-box" style="display: none;"></div></div></div>',html+='<div id="__ID__propertyGallery" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyGallery-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyGallery-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Gallery")+'</h4><div class="group"><div class="title">'+_t("설정")+'</div><dl class="line"><dt class="property-name"><label for="__ID__propertyGallery_width">'+_t("최대너비")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyGallery_width" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyGallery_height">'+_t("최대높이")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyGallery_height" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl id="__ID__propertyGallery_captionLine" class="line" style="display: none;"><dt class="property-name"><label for="__ID__propertyGallery_caption">'+_t("자막")+'</label></dt><dd><textarea class="input-text" id="__ID__propertyGallery_caption" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);"></textarea></dd></dl></div><div class="group"><div class="title">'+_t("파일")+'</div><dl class="file-list-line line"><dd><select id="__ID__propertyGallery_list" class="file-list" size="10" onchange="__EDITOR__.listChanged(\'propertyGallery_list\')" onclick="__EDITOR__.listChanged(\'propertyGallery_list\'); return false"></select></dd></dl><div class="button-box"><span class="up-button button" onclick="__EDITOR__.moveUpFileList(\'__ID__propertyGallery_list\')" title="'+_t("선택한 항목을 위로 이동합니다.")+'"><span class="text">'+_t("위로")+'</span></span><span class="divider"> | </span><span class="dn-button button" onclick="__EDITOR__.moveDownFileList(\'__ID__propertyGallery_list\')" title="'+_t("선택한 항목을 아래로 이동합니다.")+'"><span class="text">'+_t("아래로")+'</span></span></div><div id="__ID__propertyGallery_preview" class="preview-box" style="display: none;"></div></div></div>',html+='<div id="__ID__propertyJukebox" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyJukebox-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyJukebox-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Jukebox")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyJukebox_title">'+_t("제목")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyJukebox_title" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dd><input type="checkbox" id="__ID__propertyJukebox_autoplay" onclick="__EDITOR__.setProperty()" /> <label for="__ID__propertyJukebox_autoplay">'+_t("자동재생")+'</label></dd></dl><dl class="line"><dd><input type="checkbox" id="__ID__propertyJukebox_visibility" onclick="__EDITOR__.setProperty()" /> <label for="__ID__propertyJukebox_visibility">'+_t("플레이어 보이기")+'</label></dd></dl></div><div class="group"><div class="title">'+_t("파일")+'</div><dl class="file-list-line line"><dd><select id="__ID__propertyJukebox_list" class="file-list" size="10" onchange="__EDITOR__.listChanged(\'propertyJukebox_list\')" onclick="__EDITOR__.listChanged(\'propertyJukebox_list\')"></select></dd></dl><div class="button-box"><span class="up-button button" onclick="__EDITOR__.moveUpFileList(\'__ID__propertyJukebox_list\')" title="'+_t("선택한 항목을 위로 이동합니다.")+'"><span class="text">'+_t("위로")+'</span></span><span class="divider"> | </span><span class="dn-button button" onclick="__EDITOR__.moveDownFileList(\'__ID__propertyJukebox_list\')" title="'+_t("선택한 항목을 아래로 이동합니다.")+'"><span class="text">'+_t("아래로")+"</span></span></div></div></div>",html+='<div id="__ID__propertyEmbed" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyEmbed-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyEmbed-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Embed")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyEmbed_width">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyEmbed_width" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyEmbed_height">'+_t("높이")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyEmbed_height" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyEmbed_src"><acronym class="text" title="Uniform Resource Locator">URL</acronym></label></dt><dd><input type="text" class="input-text" id="__ID__propertyEmbed_src" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div></div>',html+='<div id="__ID__propertyFlash" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyFlash-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyFlash-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("Embed")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyFlash_width">'+_t("폭")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyFlash_width" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyFlash_height">'+_t("높이")+'</label></dt><dd><input type="text" class="input-text" id="__ID__propertyFlash_height" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyFlash_src">URL</label></dt><dd><input type="text" class="input-text" id="__ID__propertyFlash_src" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div></div>',html+='<div id="__ID__propertyMoreLess" class="entry-editor-property" style="display: none;"><div class="entry-editor-property-option"><input type="checkbox" class="checkbox" id="__ID__propertyMoreLess-fix-position" onclick="__EDITOR__.setPropertyPosition(1); return true;"'+(e?' checked="checked"':"")+'/><label for="__ID__propertyMoreLess-fix-position">'+_t("위치 고정")+"</label></div><h4>"+_t("More/Less")+'</h4><div class="group"><dl class="line"><dt class="property-name"><label for="__ID__propertyMoreLess_more">More Text</label></dt><dd><input type="text" class="input-text" id="__ID__propertyMoreLess_more" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl><dl class="line"><dt class="property-name"><label for="__ID__propertyMoreLess_less">Less Text</label></dt><dd><input type="text" class="input-text" id="__ID__propertyMoreLess_less" onkeyup="__EDITOR__.setProperty()" onkeypress="return preventEnter(event);" /></dd></dl></div></div>',html=html.replace(new RegExp("__EDITOR__","g"),"editor.plugins.TTMLsupport"),html=html.replace(new RegExp("__ID__","g"),"tinyMCE");var t=document.createElement("div");return t.id="property-section",t.className="section",t.innerHTML=html,t},moveUpFileList:function(e){var t=getObject(e),r=this;if(t&&t.selectedIndex>0){var a=t[t.selectedIndex-1].value,i=t[t.selectedIndex-1].text;t[t.selectedIndex-1].value=t[t.selectedIndex].value,t[t.selectedIndex-1].text=t[t.selectedIndex].text,t[t.selectedIndex].value=a,t[t.selectedIndex].text=i,t.selectedIndex--,r.setProperty(),r.listChanged(e)}},moveDownFileList:function(e){var t=getObject(e),r=this;if(t&&t.selectedIndex<t.length-1){var a=t[t.selectedIndex+1].value,i=t[t.selectedIndex+1].text;t[t.selectedIndex+1].value=t[t.selectedIndex].value,t[t.selectedIndex+1].text=t[t.selectedIndex].text,t[t.selectedIndex].value=a,t[t.selectedIndex].text=i,t.selectedIndex++,r.setProperty(),r.listChanged(e)}},listChanged:function(e){var t=this;if("propertyGallery_list"==e){var r=getObject(t.id+"propertyGallery_list");if(r.selectedIndex>-1){var a=r[r.selectedIndex].value.split("|");getObject(t.id+"propertyGallery_preview").style.display="block",getObject(t.id+"propertyGallery_preview").innerHTML='<img src="'+t.propertyFilePath+a[0]+'" width="198" />',getObject(t.id+"propertyGallery_captionLine").style.display="block",getObject(t.id+"propertyGallery_caption").value=a[1]}}else if("propertyiMazing_list"==e){var r=getObject(t.id+"propertyiMazing_list");if(r.selectedIndex>-1){var a=r[r.selectedIndex].value.split("|");getObject(t.id+"propertyiMazing_preview").style.display="block",getObject(t.id+"propertyiMazing_preview").innerHTML='<img src="'+t.propertyFilePath+a[0]+'" width="198" />'}}else if("propertyJukebox_list"==e){var r=getObject(t.id+"propertyJukebox_list");if(r.selectedIndex>-1){var a=r[r.selectedIndex].value.split("|");getObject(t.id+"propertyJukebox_title").value=a[1]}}},setPropertyPosition:function(e){var t=this;if(win=document.getElementById(t.propertyWindowId)){var r=document.getElementById(t.propertyWindowId+"-fix-position").checked;if(e){r?setUserSetting("editorPropertyPositionFix",1):setUserSetting("editorPropertyPositionFix",0);for(var a in t.propertyNames)document.getElementById(t.id+t.propertyNames[a]+"-fix-position").checked=r}r?win.style.top="120px":(null===t.propertyOffsetTop&&(t.propertyOffsetTop=getOffsetTop(win)),null===t.scrollTop&&(t.scrollTop=STD.getScrollTop()),scrollHeight=STD.getScrollTop()-t.scrollTop,STD.getScrollTop()>t.propertyOffsetTop-15?win.offsetHeight>getWindowCleintHeight()?scrollHeight>0?win.style.top=Math.max(9,Math.min(3e3,STD.getScrollTop()+getWindowCleintHeight()-t.propertyOffsetTop-win.offsetHeight))+"px":win.style.top=Math.max(9,Math.min(3e3,STD.getScrollTop()+getWindowCleintHeight()-t.propertyOffsetTop-win.offsetHeight))+"px":win.style.top=Math.min(3e3,24+STD.getScrollTop()-t.propertyOffsetTop)+"px":win.style.top="120px",t.scrollTop=STD.getScrollTop())}},addObject:function(e){var t=this,r=e.objects;switch(e.mode){case"Image1L":case"Image1C":case"Image1R":if(t._isMediaFile(r[0][0]))return getObject(t.id+"propertyInsertObject_type").value="url",getObject(t.id+"propertyInsertObject_url").value=blogURL+"/attachment/"+r[0][0],t.command("InsertObject"),!0;case"Image2C":case"Image3C":try{var a,i=servicePath+adminSkin+"/image/spacer.gif",l="";if("Image1L"==e.mode||"Image1C"==e.mode||"Image1R"==e.mode)new RegExp(".(jpe?g|gif|png|bmp|webm|svg)$","i").test(r[0][0])?(i=t.propertyFilePath+r[0][0],l=r[0][1]):(r[0][1]="",l=t.styleUnknown),a=e.mode.substr(5)+"|"+r[0][0]+"|"+r[0][1]+"|"+r[0][2].replaceAll("|","");else{l='width="'+100*parseInt(e.mode.substr(5))+'" height="100"',a=e.mode.substr(5);for(var p=0;r[p];++p)a+="|"+r[p][0]+"|"+r[p][1]+"|"+r[p][2]}var s={Image1L:"tatterImageLeft",Image1C:"tatterImageCenter",Image1R:"tatterImageRight",Image2C:"tatterImageDual",Image3C:"tatterImageTriple"}[e.mode],o='<img class="'+s+'" src="'+i+'" '+l+' longdesc="'+t.addQuot(a)+'" />';return t.command("Raw",o),!0}catch(n){}for(var _=e.mode.substr(5),p=0;r[p];++p)_+="|"+r[p][0]+"|"+r[p][1]+"|"+r[p][2];return!0;case"ImageFree":for(var o="",p=0;r[p];++p)o+='<img class="tatterImageFree" src="'+t.propertyFilePath+r[p][0]+'" longdesc="[##_ATTACH_PATH_##]/'+r[p][0]+'" '+r[p][1]+" />";return t.command("Raw",o),!0;case"Imazing":case"Gallery":case"Jukebox":for(var _="Imazing"==e.mode?"iMazing":e.mode,p=0;r[p];++p)_+="|"+r[p][0]+"|"+r[p][1];switch(e.mode){case"Imazing":_+="|"+e.properties+"|";break;case"Gallery":_+='|width="400" height="300"';break;case"Jukebox":_+="|autoplay=0 visible=1|"}try{var s="tatter"+e.mode,d="Jukebox"==e.mode?'width="200" height="30"':'width="400" height="300"';return t.command("Raw",'<img class="'+s+'" src="'+servicePath+adminSkin+'/image/spacer.gif" '+d+' longdesc="'+_+'" />'),!0}catch(n){}return!0}return!1},command:function(e,t,r){var a=this;switch(e){case"MoreLessBlock":a.command("Raw",'<div class="tattermoreless" more=" more.. " less=" less.. ">&nbsp;',"</div>");break;case"InsertObject":if("url"==getObject(a.id+"propertyInsertObject_type").value){var i=getObject(a.id+"propertyInsertObject_url").value.trim();if(""==i)return void alert(s_enterURL);var l=new RegExp("\\.(\\w+)(?:$|\\?)").exec(i);l=l&&2==l.length?l[1].toLowerCase():"";var p="";if("swf"==l||""==l)p='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="400" height="300"><param name="wmode" value="transparent"/><param name="movie" value="'+i+'"/><!--[if !IE]> <--><object type="application/x-shockwave-flash" transparent="yes" data="'+i+'" width="400" height="300"><p><a href="'+i+'">[Flash] '+i+"</a></p></object><!--> <![endif]--></object>";else{var s=null;switch(l){case"mp3":s="audio/mpeg";break;case"mid":s="audio/x-ms-mid";break;case"wav":s="audio/x-ms-wav";break;case"wax":s="audio/x-ms-wax";break;case"wma":s="audio/x-ms-wma";break;case"avi":s="video/x-msvideo";break;case"asf":case"asx":s="video/x-ms-asf";break;case"mov":s="video/quicktime";break;case"mpg":case"mpeg":s="video/x-ms-mpeg";break;case"wmv":s="video/x-ms-wmv";break;case"wm":s="video/x-ms-wm";break;case"wvx":s="video/x-ms-wvx"}if(null===s)return void alert(s_unknownFileType);p="video/quicktime"==s?'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="320" height="260"><param name="src" value="'+i+'"/><param name="controller" value="true"/><param name="autoplay" value="false"/><!--[if !IE]>--><object type="video/quicktime" data="'+i+'" width="320" height="260"><param name="autoplay" value="false"/><param name="controller" value="true"/></object><!--<![endif]--></object>':'<object classid="clsid:22D6F312-B0F6-11D0-94AB-0080C74C7E95"><param name="Filename" value="'+i+'"/><param name="AutoStart" value="false"/><!--[if !IE]> <--><object type="'+s+'" data="'+i+'" width="320" height="'+("audio/mpeg"==s?"20":"240")+'"><param name="AutoStart" value="0"/><embed pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/Products/MediaPlayer/" src="'+i+'" width="320" height="'+("audio/mpeg"==s?"20":"240")+'" type="application/x-mplayer2" autostart="0"></embed></object><!--> <![endif]--></object>'}}else{var p=getObject(a.id+"propertyInsertObject_chunk").value.trim();if(!new RegExp("^<object(?:.|\\s)*</object>$","i").test(p))return void alert(s_enterObjectTag);if(lowercasedCode=p.toLowerCase(),0==lowercasedCode.count("<object")||lowercasedCode.count("<object")!=lowercasedCode.count("</object>"))return void alert(s_enterCorrectObjectTag)}a.command("Raw",'<img class="tatterObject" src="'+servicePath+adminSkin+'/image/spacer.gif"'+a.parseImageSize(p,"string","css")+' longDesc="'+a.objectSerialize(p)+'" />',""),getObject(a.id+"propertyInsertObject").style.display="none";break;case"Raw":r="undefined"==typeof r?"":r,selectedContent=editor.selection.getContent(),editor.execCommand("mceInsertContent",!1,t+selectedContent+r);break;case"ToggleTextarea":"wysiwyg"==a.editorMode?(editor.save(),jQuery(".mce-edit-area").hide(),jQuery(".mce-statusbar").hide(),document.getElementById("editWindow").style.display="block",document.getElementById("editWindow").style.width="100%",a.editorMode="raw"):(editor.load(),document.getElementById("editWindow").style.display="none",jQuery(".mce-edit-area").show(),jQuery(".mce-statusbar").show(),a.editorMode="wysiwyg")}},getInfo:function(){return{longname:"TTML Support",author:"Jeongkyu Shin",authorurl:"https://www.textcube.org",infourl:"http://github.com/needlworks/textcube",version:"2.5.0"}}}),tinymce.PluginManager.add("TTMLsupport",tinymce.Textcube.TTMLsupport);