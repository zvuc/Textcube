function TTGallery(e){this.containerId=e,this.container=document.getElementById(this.containerId),this.container.style.filter="progid:DXImageTransform.Microsoft.Fade(duration=0.3, overlap=1.0)",this.container.style.textAlign="center",this.container.style.width="100%",this.container.instance=this,this.numImages=0,this.imageLoaded=0,this.offset=0,this.src=new Array,this.caption=new Array,this.width=new Array,this.height=new Array,this.imageCache=new Array,this.nextText="NEXT",this.prevText="PREVIOUS",this.enlargeText="ZOOM",this.altText="gellery image",this.container=null}TTGallery.prototype.appendImage=function(e,t,i,n){this.numImages++;var s=new Image;s.src=e,s.onload=function(){this.src},this.imageCache[this.imageCache.length]=e,this.src[this.src.length]=e,this.width[this.width.length]=i,this.height[this.height.length]=n,this.caption[this.caption.length]=t},TTGallery.prototype.getControl=function(){var e=document.createElement("div");return e.style.marginBottom="10px",e.className="galleryControl",e.style.color="#777",e.style.font="bold 0.9em Verdana, Sans-serif",e.innerHTML="("+(this.offset+1)+"/"+this.numImages+') <a href="#void" onclick="document.getElementById(\''+this.containerId+'\').instance.prev(); return false;"><img src="'+serviceURL+'/resources/image/gallery/gallery_prev.gif" style="vertical-align: middle;" alt="'+this.prevText+'" /></a> <a href="#void" onclick="document.getElementById(\''+this.containerId+'\').instance.showImagePopup1(); return false;"><img src="'+serviceURL+'/resources/image/gallery/gallery_enlarge.gif" style="vertical-align: middle;" alt="'+this.enlargeText+'" /></a> <a href="#void" onclick="document.getElementById(\''+this.containerId+'\').instance.next(); return false;"><img src="'+serviceURL+'/resources/image/gallery/gallery_next.gif" style="vertical-align: middle;" alt="'+this.nextText+'" /></a>',e},TTGallery.prototype.getImage=function(){var e=document.createElement("img");return e.instance=this,e.src=this.src[this.offset],e.width=this.width[this.offset],e.height=this.height[this.offset],e.onclick=this.showImagePopup2,e.alt=this.altText,e.style.cursor="pointer",e},TTGallery.prototype.getCaption=function(){var e=this.caption[this.offset];e=e.replace(new RegExp("&lt;?","gi"),"<"),e=e.replace(new RegExp("&gt;?","gi"),">"),e=e.replace(new RegExp("&quot;?","gi"),'"'),e=e.replace(new RegExp("&#39;?","gi"),"'"),e=e.replace(new RegExp("&amp;?","gi"),"&"),e=e.replace(new RegExp("&lt;?","gi"),"<"),e=e.replace(new RegExp("&gt;?","gi"),">"),e=e.replace(new RegExp("&quot;?","gi"),'"'),e=e.replace(new RegExp("&#39;?","gi"),"'"),e=e.replace(new RegExp("&amp;?","gi"),"&");var t=document.createElement("div");return t.style.textAlign="center",t.style.marginTop="8px",t.className="galleryCaption",t.appendChild(document.createTextNode(e)),t},TTGallery.prototype.show=function(e){if(this.container=document.getElementById(this.containerId),0==this.numImages){var t=document.createElement("div");return t.style.textAlign="center",t.style.color="#888",t.style.margin="10px auto",t.style.font="bold 2em/1 Verdana, Sans-serif",t.innerHTML="NO IMAGES",this.container.appendChild(t),void(this.container=null)}"undefined"==typeof e?this.offset=0:0>e?this.offset=this.numImages-1:e>=this.numImages?this.offset=0:this.offset=e,this.container.filters&&this.container.filters[0].Apply(),this.container.innerHTML="",this.container.appendChild(this.getControl()),this.container.appendChild(this.getImage()),this.container.appendChild(this.getCaption()),this.container.filters&&this.container.filters[0].Play(),this.container=null},TTGallery.prototype.prev=function(){this.show(this.offset-1)},TTGallery.prototype.next=function(){this.show(this.offset+1)},TTGallery.prototype.showImagePopup1=function(){this.showImagePopup()},TTGallery.prototype.showImagePopup2=function(){this.instance.showImagePopup()},TTGallery.prototype.showImagePopup=function(e){try{open_img(this.src[this.offset])}catch(t){window.open(this.src[this.offset])}};